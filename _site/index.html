<h2>Sprint DEL-102</h2>
<h3>[AV] Change OrderPayment update flow</h3>
<ul>
<li>
<p>Deleting <code>OrderPayment</code> will create an amending reverse OrderPayment instead of deleting.</p>
<img width="400" alt="Deleted payment" src="https://github.com/Maffiaco/team/assets/1776416/d5da5cf3-3f22-4263-b278-0a14ef70ce95">
<p>Deleted payment shown with reason &quot;Manualy deleted&quot; without action.</p>
</li>
<li>
<p>Updating <code>OrderPayment</code> will create an amending OrderPayment with difference amount instead direct updating.</p>
<img width="400" alt="Edit payment form with disabled payment type" src="https://github.com/Maffiaco/team/assets/1776416/4f9d0038-4cd3-4093-807f-9c21ad80681e">
<p>Edit payment form with disabled type. To change type, we must delete the old payment to create new payment with different type.</p>
<img width="400" alt="Amending payment" src="https://github.com/Maffiaco/team/assets/1776416/e93f2540-686f-4c97-a4b9-735a20ec5730">
<p>Amending payment shown different amount with reason.
i.e. this case, order are paid fully <code>11.405.237 ‚Ç´</code>, then editted to <code>10.000.000 ‚Ç´</code>. We'll record an amending refund payment of <code>1.405.237 ‚Ç´</code>.</p>
</li>
</ul>
<h3>üöÄ [AV] Fix <a href="https://deliany.youtrack.cloud/issue/DELIANY-1959/Bug-Products-are-missing-in-BIZ-app">DELIANY-1959</a> products of some brands are missing</h3>
<p>On product list, if brand &gt; 10, some brands are show empty product list.
Rootcause: On product query, we limit only 10 brands.
Fix: Get all brands</p>
  <img width="400" alt="Missing products on product list" src="https://github.com/Maffiaco/team/assets/1776416/ee0aeb9a-e190-4cc3-9d7c-0e27b9c3c623">
<h3>üöÄ [AV] Fix <a href="https://deliany.youtrack.cloud/issue/DELIANY-1955/Sub-total-in-edit-view-excludes-voided-items">DELIANY-1955</a> wrong subtotal in edit order in POS</h3>
<p>Before, subtotal in edit order counts voided item. Fix: excluded voided item in subtotal.</p>
<p>Booking detail:</p>
  <img width="400" alt="Booking detail" src="https://github.com/Maffiaco/team/assets/1776416/be40acc4-4367-462c-b778-babbf5518720">
<p>Edit order:</p>
  <img width="400" alt="Edit order" src="https://github.com/Maffiaco/team/assets/1776416/b70756c2-b984-4289-9514-52c40b219088">
<h3>üöÄ [QH] Improve UI Print bill on POS</h3>
<ul>
<li>
<p>The text font size should be changed to 10 points, while the header font size should be changed to 12 points.</p>
</li>
<li>
<p>When splitting the bill, there should be no duplication of the header or footer.</p>
</li>
<li>
<p>The borders and spacing between lines in the table should be removed.</p>
</li>
<li>
<p>The page margins should be reduced by half.</p>
<img width="400" alt="Split bill" src="https://github.com/Maffiaco/team/assets/33405334/3d92dbb3-032f-4bbc-b4c2-01c86d3557a9">
</li>
</ul>
<h3>üöÄ [QH] Fix <a href="https://deliany.youtrack.cloud/issue/DELIANY-1956/Bug-Wrong-number-of-addition-in-split-bill">DELIANY-1956</a> wrong number of addition in split bill</h3>
  <img width="400" alt="image" src="https://github.com/Maffiaco/team/assets/33405334/e50f7a4f-c96f-48e4-954c-621f073b52ae">
<h3>üöÄ [QH] Fix <a href="https://deliany.youtrack.cloud/issue/DELIANY-1953/Bug-Lack-of-item-in-split-bill">DELIANY-1953</a> Lack of item in split bill</h3>
<p>If a user is splitting a bill and another user is adding items to the order, the items will be added to the first bill when the user saves the split bill results.</p>
<h3>[QH] <a href="https://deliany.youtrack.cloud/issue/DELIANY-1957/Enhance-generate-OTP-confirm-code">DELIANY-1957</a> Enhance - generate OTP confirm code</h3>
<p>When a user updates the role of an account in the Back-Office</p>
  <img width="400" alt="Screenshot 2024-02-20 at 08 05 14" src="https://github.com/Maffiaco/team/assets/33405334/29ef76c6-be6a-436e-bcde-ee7622d1b9e3">
<p>Previously, the user's confirm_code will be regenerated</p>
  <img width="400" alt="Screenshot 2024-02-20 at 08 10 20" src="https://github.com/Maffiaco/team/assets/33405334/c7bc497d-5d21-4893-a1a6-330d34db8666">
<p>Currently, accounts that already have a confirm_code will not be regenerated.</p>
<h3>[KHOA] <a href="https://deliany.youtrack.cloud/issue/DELIANY-1911/KDS-improvement-Improve-log-in-session-to-not-mismatch-with-other-apps">DELIANY-1911</a> Improve log-in session to not mismatch with other apps</h3>
<ul>
<li>
<p>Create service-account when create a prepstation</p>
<img width="400" alt="Create service account" src="https://github.com/Maffiaco/team/assets/61538368/5b9b3b5e-3522-49b9-9adf-c6d4c6a92a5a">
</li>
<li>
<p>Use service user to login if user does not exist show error
<img width="400" alt="image" src="https://github.com/Maffiaco/team/assets/61538368/3803e368-fb9b-4fb6-bbe4-29e96e55a34c"></p>
</li>
<li>
<p>If login session conflict, logout the first session</p>
</li>
</ul>
<p><video src="https://github.com/Maffiaco/team/assets/61538368/790c0842-1385-467d-aea2-2e8df74179d2"></video></p>
<h3>[KHOA] <a href="https://deliany.youtrack.cloud/issue/DELIANY-1908/Mobile-Tet-theme-on-mobile">DELIANY-1908</a> Tet theme on mobile</h3>
<img width="400" alt="297796983-22f5e792-fff1-44ab-aabd-7f5d9250c37d" src="https://github.com/Maffiaco/team/assets/61538368/f7b8ea77-e932-46f7-aa75-a4231bfad332">
<h3>[KHOA] <a href="https://deliany.youtrack.cloud/issue/DELIANY-1961/Hide-the-Product-on-mobile-app-when-Show-on-order-app-is-false">DELIANY-1961</a> Hide the Product on mobile app when &quot;Show on order app&quot; is false</h3>
<img width="379" alt="image" src="https://github.com/Maffiaco/team/assets/61538368/a5e15a6e-cf79-4ebb-b1cd-6b44777b49aa">
<h3>[NN] Improve UI Print bill on POS</h3>
<ul>
<li>Bill</li>
</ul>
<ul>
<li>Fix lost table header on print</li>
<li>Reduce spacing / padding on summary</li>
<li>Refactor bill table, also add Discount row on product order</li>
<li>Fix right margin to adapt with the POS printer</li>
<li>Checked directly and deployed to production</li>
</ul>
<p><img src="https://github.com/Maffiaco/team/assets/29590621/1867cda7-352b-4524-bc65-aa1ff4c159aa" alt="IMG_5398"></p>
<ul>
<li>Order list
https://deliany.youtrack.cloud/issue/DELIANY-1938/Biz-Apply-ant-design-for-Orders</li>
</ul>
<ul>
<li>Improve order list table with fully support search/ filter</li>
<li>Support more component and update the new design token from UI/UX</li>
<li>Fix responsive layout</li>
<li>Improve notification (support subcription on order Tab)</li>
</ul>
<img width="1728" alt="image" src="https://github.com/Maffiaco/team/assets/29590621/207ab577-303c-43f7-8505-6c5f90b5ae69">
<ul>
<li>Fix error log from console / change menu items to object structure instead of children as before. Because this functionality is deprecated by Antd. Also improve the layout:</li>
</ul>
<img width="249" alt="image" src="https://github.com/Maffiaco/team/assets/29590621/ddc9cca5-bf30-47be-837b-13479ebdb485">
<h3>[Dat] <a href="https://deliany.youtrack.cloud/issue/DELIANY-1967/Improvement-Hide-fields-if-value-0d-in-final-bills">DELIANY-1967</a> Hide fields if value = 0ƒë in final bills</h3>
<ul>
<li>In Delivery orders should hide &quot;Gi·∫£m gi√° tr·ª±c ti·∫øp&quot; if value = 0ƒë in final bills.</li>
<li>In Order reservations and split bills should hide &quot;ƒê·∫∑t c·ªçc&quot; if value = 0ƒë in final bills.</li>
</ul>
<p>Before:
<br>
<img width="450" alt="" src="https://github.com/Maffiaco/team/assets/51017791/b90ae6a3-1dfc-4395-ae01-4d9de388c749"/>
<img width="450" alt="" src="https://github.com/Maffiaco/team/assets/51017791/def89179-111d-4ed0-8abf-e9998ddac681"/>
<br>
After:
<br>
<img width="450" alt="" src="https://github.com/Maffiaco/team/assets/51017791/c3abfbc3-a540-4edb-ae33-3afe93591fbf">
<img width="450" alt="" src="https://github.com/Maffiaco/team/assets/51017791/39d50878-db99-48a6-9533-d2244fbfeaae"></p>
<h3>[Dat] <a href="https://deliany.youtrack.cloud/issue/DELIANY-1965/Improve-slug-in-Locations-settings-not-overwrite-when-update-location-name">DELIANY-1965</a> Improve slug in Locations settings: not overwrite when update location name</h3>
<ul>
<li>Not auto-generate slug when editing location name in Back-office.</li>
</ul>
<p>https://github.com/Maffiaco/team/assets/51017791/e380dd48-cb2e-48d4-a992-a9b768d97691</p>
<h3>[Dat] <a href="https://deliany.youtrack.cloud/issue/DELIANY-1966/Improvement-Show-opening-hour-of-the-day">DELIANY-1966</a> Show opening hour of the day</h3>
<p>Improve if location opens overnight and customer book a reservation at midnight ‚Üí Should show opening time of that day, from the current time when customer visit website:</p>
<ul>
<li>Improve opening status and opening/closing time when users visit order app early in the day.</li>
<li>Allow users to select the reserved time when the restaurant opens overnight.</li>
</ul>
<img width="800" alt="" src="https://github.com/Maffiaco/team/assets/51017791/904bd700-7b3b-4c16-a5f1-f664378d6987">
<img width="800" alt="" src="https://github.com/Maffiaco/team/assets/51017791/8ce5e892-58be-46da-bc10-3a9dbda97cb2">
<h3>[Hieu] <a href="https://deliany.youtrack.cloud/issue/DELIANY-1962/Create-IT-Role-in-BIZ">DELIANY-1962</a> Create IT Role in Biz</h3>
<p>Temporary solution:</p>
<ul>
<li>Remove <code>Customers</code> tab from BO</li>
<li>Introduce <code>System Users</code> to replace tab <code>User</code> in BO</li>
<li><code>System Users</code> are users which aren't client/customer.</li>
</ul>
<img width="800" alt="Screen Shot 2024-02-20 at 07 46 04" src="https://github.com/Maffiaco/team/assets/40940879/e7cdc7d3-ce39-466b-b31e-4f7c78cfb85b">
<img width="800" alt="Screen Shot 2024-02-20 at 07 47 16" src="https://github.com/Maffiaco/team/assets/40940879/889fd180-c27c-4f2d-b4c4-40ccc9237e81">
