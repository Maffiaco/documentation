## Sprint DEL-146

### [VuNH] ğŸš€ [DELIANY-3045](https://deliany.youtrack.cloud/issue/DELIANY-3045) Send storeID & storeName for Zalopay transaction
### [VuNH] ğŸš€ [DELIANY-3043](https://deliany.youtrack.cloud/issue/DELIANY-3043) [POS] Update order ticket sent to printer
  - Printer/Ordered by/Transact/Cust
### [VuNH] ğŸš€ [DELIANY-3061](https://deliany.youtrack.cloud/issue/DELIANY-3061) Show promotions of Chester's only
### [VuNH] ğŸš€ [DELIANY-3030](https://deliany.youtrack.cloud/issue/DELIANY-3030) Import additions
### [VuNH] ğŸš€ Support relase invoice FAST
### [VuNH] Stock calculation by unit of measure

---

### [Nam] ğŸš€ Update Sales Report

- [x] Aggregate delivery fee into net amount
- [x] Show delivery fee as detail rows
- [x] Add external transaction id column for integrated payment to payment detail sheet (if available)
- [x] Use `completed_at` as payment time instead of `updated_at`
- [x] Add product sub category column
- [x] Calculate change for the last payments
- [x] Round number in Payment Detail and Transaction Summary sheet

### [Nam] ğŸš€ [DELIANY-3046](https://deliany.youtrack.cloud/issue/DELIANY-3046) Allow to void payoo payment in booking deposit

### [Nam] ğŸš€ [DELIANY-3049](https://deliany.youtrack.cloud/issue/DELIANY-3049) Add ref code to product snapshot

### [Nam] ğŸš€ [BackOffice] Reset order filter now also resets page to one

### [Nam] ğŸš€ [DELIANY-3055](https://deliany.youtrack.cloud/issue/DELIANY-3055) Update Chester's order web

- [x] Hardcoded SEO information
- [x] Hide dine-in option
- [x] Update footer menu link
- [x] Remove unnecessary items in sidebar menu

### [Nam] ğŸš€ [DELIANY-3062](https://deliany.youtrack.cloud/issue/DELIANY-3062) Update Chester's tracking page support info

### [Nam] ğŸš€ [DELIANY-3065](https://deliany.youtrack.cloud/issue/DELIANY-3065) Update Chester's checkout policies agreement message

<img width="800" src="https://github.com/user-attachments/assets/6c812939-c740-4e86-949c-814212d23097" />

### [Nam] [DELIANY-3074](https://deliany.youtrack.cloud/issue/DELIANY-3074) Auto select addition(s) when add product

- _Case 1_: Number of additions = Number quantity of items

### [TP] ğŸš€ [DELIANY-3057](https://deliany.youtrack.cloud/agiles/131-3/current?issue=DELIANY-3057) [Bug][BackOffice] Image removed after updating location
- Issue: When editing a location, the image (logo) is removed after saving.
The cause is that the Recoil state is not reset after leaving the edit/create page, leading to phantom data from the previous record overwriting the image field.
- Solution : Reset the Recoil state when leaving or unmounting the edit/create location page.
Ensure that if the user doesnâ€™t change the image, the existing image remains preserved.

### [TP] ğŸš€ [DELIANY-3064](https://deliany.youtrack.cloud/agiles/131-3/current?issue=DELIANY-3064) [Bug][POS] User can view items of other booking after clicking to view booking detail
- Issue : This happens because useOrderDetailsLazyQuery is used â€” when thereâ€™s no booking ID, it doesnâ€™t fetch new data and instead retains (caches) the previous bookingâ€™s details.
- Solution : Replace useOrderDetailsLazyQuery with useQuery.
useQuery returns null when thereâ€™s no booking ID, ensuring that old cached data is cleared and preventing users from seeing data from a previous booking.

### [TP] ğŸš€ [DELIANY-3073](https://deliany.youtrack.cloud/agiles/131-3/current?issue=DELIANY-3073) [POS] Not require recipient phone number when create new pickup order in POS
- Solution : If the method is â€œDine-inâ€ or â€œPickupâ€, the phone number field should not be required.

### [TP] ğŸš€ [DELIANY-3070](https://deliany.youtrack.cloud/agiles/131-3/current?issue=DELIANY-3070) [POS] Allow user to search by transact ID of order
- Solution : Add a new column transact_type (string) to the search_document table.
Update the backend to include a search query using ILIKE on the transaction ID field
### [TP] ğŸš€ [DELIANY-3068](https://deliany.youtrack.cloud/agiles/131-3/current?issue=DELIANY-3068) [Chester's Web Order improvement] Fix image scale issue on outlet page to ensure proper display

- Issue : On the Chesterâ€™s Web Order outlet page, images are displayed with incorrect proportions due to improper scaling.
- Solution : Adjust the frontend to use properly scaled images that maintain the original aspect ratio when displayed, ensuring the image fits correctly within its frame.

### [TP] ğŸš€ [DELIANY-3047](https://deliany.youtrack.cloud/agiles/131-3/current?issue=DELIANY-3047) [POS] Update dine-in order print receipt
-Solution  : Use the same receipt template for both dine-in and pickup orders to ensure a unified and consistent printing format.

### [TP] ğŸš€  [DELIANY-3058](https://deliany.youtrack.cloud/agiles/131-3/current?issue=DELIANY-3058) [POS] Allow quick input Recipient Name when create new order
- Issue : In the POS system, entering the recipient name when creating a new order takes extra time, especially for walk-in customers.
- Solution : Add a â€œWalk-in Customerâ€ option that cashiers can quickly select as the recipient name.
This allows faster order creation without requiring manual input for walk-in customers.
### [TP] ğŸš€ Display transact
  #### [DELIANY-3048](https://deliany.youtrack.cloud/agiles/131-3/current?issue=DELIANY-3048) [POS] Display transact number on Print bill on POS for Chester's
  #### [DELIANY-3044](https://deliany.youtrack.cloud/agiles/131-3/current?issue=DELIANY-3044) [POS] Display transact number on POS for Chester's
- Issue: In the POS system for Chesterâ€™s, the printed bill currently does not display the transaction number, making it harder for staff to manage and track bills efficiently.
- Solution: Add a configuration option in app_service_location to enable or disable showing the transaction number on the bill.
Update the bill template,record to display the transaction number when the configuration is enabled.
### [TP] ğŸš€ [DELIANY-3059](https://deliany.youtrack.cloud/agiles/131-3/current?issue=DELIANY-3059) [Improvement][POS] Allow add new/ edit Notes of Order
- Issue: In the POS system, users currently cannot add or edit notes and tags for an existing order.
- Solution : Add an Edit button next to the order information section, allowing users to add or modify notes and tags directly within the order details.
### [TP] [POS](https://deliany.youtrack.cloud/agiles/131-3/current?issue=DELIANY-3072) Update Chester's print receipt
- Issue : In the POS system for Chesterâ€™s, the print receipt needs to be updated to reflect the latest requirements.
- Solution :Modify the footer according to the new content.
Replace the â€œInvoiceâ€ label with â€œRecipientâ€ to match the new format.
### [TP] [DELIANY-3071]() [POS] Apply lead time when user creates new order in POS
- Issue : In the POS system, when creating a new order, the lead time is currently set to a fixed value for all orders.
- Solution : Calculate lead time according to the distance between the store and delivery address.
Adjust lead time based on the order type (e.g., delivery, pickup, dine-in).

